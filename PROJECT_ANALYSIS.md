# üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ Loan Repayment

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Loan Repayment** - —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ REST API
- –ú–∞—Å—Å–æ–≤–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏ –∏–∑ CSV —Ñ–∞–π–ª–æ–≤
- –ó–∞—â–∏—â–∞—Ç—å –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –ø–ª–∞—Ç–µ–∂–µ–π
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç—ã –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Clean Architecture)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Presentation Layer (Controller)   ‚îÇ
‚îÇ  /src/Controller/PaymentController  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Application Layer (DTO, Service)  ‚îÇ
‚îÇ  /src/Application/Service/          ‚îÇ
‚îÇ  /src/Application/Dto/              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Domain Layer (Business Logic)     ‚îÇ
‚îÇ  /src/Domain/Service/               ‚îÇ
‚îÇ  /src/Domain/Entity/                ‚îÇ
‚îÇ  /src/Domain/Event/                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Infrastructure Layer (DB, External) ‚îÇ
‚îÇ  /src/Infrastructure/Repository/    ‚îÇ
‚îÇ  /src/Infrastructure/Entity/        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤

```
src/
‚îú‚îÄ‚îÄ Application/
‚îÇ   ‚îú‚îÄ‚îÄ Dto/                              # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ IncomingPaymentDto.php       # DTO –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ Notification/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Message/                     # –°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FailedPaymentsReport.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SendEmail.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NotificationDispatcher.php   # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ Service/
‚îÇ       ‚îî‚îÄ‚îÄ PaymentIngestionService.php  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ
‚îú‚îÄ‚îÄ Command/
‚îÇ   ‚îú‚îÄ‚îÄ ImportBatchPaymentFromCsvCommand.php  # –ò–º–ø–æ—Ä—Ç –∏–∑ CSV
‚îÇ   ‚îî‚îÄ‚îÄ PaymentReportByDateCommand.php        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ Controller/
‚îÇ   ‚îî‚îÄ‚îÄ PaymentController.php            # REST API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îÇ
‚îú‚îÄ‚îÄ Domain/
‚îÇ   ‚îú‚îÄ‚îÄ Assignment/                      # –õ–æ–≥–∏–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ Entity/                          # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (–Ω–µ ORM!)
‚îÇ   ‚îú‚îÄ‚îÄ Enum/                            # –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Event/                           # –°–æ–±—ã—Ç–∏—è (Domain Events)
‚îÇ   ‚îú‚îÄ‚îÄ Exception/                       # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DuplicatePaymentException
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InvalidDateException
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NegativeAmountException
‚îÇ   ‚îî‚îÄ‚îÄ Service/                         # –î–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ
‚îú‚îÄ‚îÄ Infrastructure/
‚îÇ   ‚îú‚îÄ‚îÄ Entity/                          # ORM Entities (Doctrine)
‚îÇ   ‚îú‚îÄ‚îÄ Mapper/                          # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ Notification/                    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ Repository/                      # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îÇ
‚îî‚îÄ‚îÄ Kernel.php                           # –Ø–¥—Ä–æ Symfony –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

config/
‚îú‚îÄ‚îÄ bundles.php                          # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Symfony –±–∞–Ω–¥–ª–æ–≤
‚îú‚îÄ‚îÄ packages/                            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ doctrine.yaml                    # Doctrine ORM –∫–æ–Ω—Ñ–∏–≥
‚îÇ   ‚îú‚îÄ‚îÄ framework.yaml                   # Symfony Framework –∫–æ–Ω—Ñ–∏–≥
‚îÇ   ‚îú‚îÄ‚îÄ messenger.yaml                   # –û—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ routes.yaml                          # –ú–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ services.yaml                        # –°–µ—Ä–≤–∏—Å-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

public/
‚îî‚îÄ‚îÄ index.php                            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

tests/
‚îú‚îÄ‚îÄ bootstrap.php                        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
‚îî‚îÄ‚îÄ Domain/
    ‚îî‚îÄ‚îÄ Service/                         # –¢–µ—Å—Ç—ã –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

var/
‚îú‚îÄ‚îÄ cache/                               # –ö—ç—à Symfony
‚îî‚îÄ‚îÄ log/                                 # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **PaymentController** (`src/Controller/PaymentController.php`)

REST API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π.

**–ú–∞—Ä—à—Ä—É—Ç—ã:**
- `POST /api/payment/` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–¥–∏–Ω –ø–ª–∞—Ç–µ–∂

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
```php
// –í—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ
{
  "firstname": "string",
  "lastname": "string",
  "paymentDate": "ISO8601 DateTime",
  "amount": "decimal",
  "description": "string",
  "refId": "UUID"
}

// –û—Ç–≤–µ—Ç (200 OK)
{
  "message": "Payment successfully registered",
  "refId": "UUID"
}

// –û—à–∏–±–∫–∞ (409 Conflict) - –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –ø–ª–∞—Ç–µ–∂
{
  "message": "Duplicate payment detected"
}
```

**–ò—Å–∫–ª—é—á–µ–Ω–∏—è:**
- `DuplicatePaymentException` ‚Üí 409
- `DomainException` ‚Üí 400

### 2. **ImportBatchPaymentFromCsvCommand** (`src/Command/ImportBatchPaymentFromCsvCommand.php`)

–ö–æ–Ω—Å–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –ø–ª–∞—Ç–µ–∂–µ–π –∏–∑ CSV.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
php bin/console import --file=/path/to/payments.csv
```

**CSV —Ñ–æ—Ä–º–∞—Ç:**
```csv
firstname,lastname,paymentDate,amount,description,refId
–ò–≤–∞–Ω,–ò–≤–∞–Ω–æ–≤,2024-02-16T15:30:00+00:00,150.99,LN20240216,ref-001
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∫–æ–¥—ã:**
- `0` - —É—Å–ø–µ—à–Ω–æ
- `1` - –æ—à–∏–±–∫–∞
- `2` - —á–∞—Å—Ç–∏—á–Ω—ã–π —É—Å–ø–µ—Ö (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –æ—à–∏–±–∫–∏)

### 3. **PaymentIngestionService** (`src/Application/Service/PaymentIngestionService.php`)

–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π

### 4. **Domain Events**

–°–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –Ω–∞–¥ –ø–ª–∞—Ç–µ–∂–∞–º–∏.

**–ü—Ä–∏–º–µ—Ä—ã:**
- `PaymentReceivedEvent` - –ø–ª–∞—Ç–µ–∂ –ø–æ–ª—É—á–µ–Ω
- `PaymentProcessedEvent` - –ø–ª–∞—Ç–µ–∂ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
- `PaymentFailedEvent` - –ø–ª–∞—Ç–µ–∂ –æ—Ç–∫–ª–æ–Ω–µ–Ω

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `payment`

```sql
CREATE TABLE payment (
    id UUID PRIMARY KEY,
    firstname VARCHAR(255) NOT NULL,
    lastname VARCHAR(255) NOT NULL,
    payment_date TIMESTAMP NOT NULL,
    amount DECIMAL(10, 2) NOT NULL,
    description TEXT,
    ref_id VARCHAR(255) UNIQUE NOT NULL,
    status VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- PRIMARY KEY –Ω–∞ `id` (UUID)
- UNIQUE –Ω–∞ `ref_id` (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏)
- INDEX –Ω–∞ `payment_date` (–¥–ª—è –æ—Ç—á–µ—Ç–æ–≤)

---

## üîÑ –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ REST API

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –í—Ö–æ–¥—è—â–∏–π JSON –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PaymentController.index()       ‚îÇ
‚îÇ  - –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON           ‚îÇ
‚îÇ  - –°–æ–∑–¥–∞–Ω–∏–µ IncomingPaymentDto  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PaymentIngestionService.process()    ‚îÇ
‚îÇ  - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö                   ‚îÇ
‚îÇ  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π (ref_id)           ‚îÇ
‚îÇ  - –°–æ–∑–¥–∞–Ω–∏–µ Domain Entity             ‚îÇ
‚îÇ  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î (Repository)       ‚îÇ
‚îÇ  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Domain Event Dispatcher      ‚îÇ
‚îÇ  - DispatchEvents             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Event Subscribers (–Ω–∞–ø—Ä–∏–º–µ—Ä)         ‚îÇ
‚îÇ  - SendNotificationSubscriber         ‚îÇ
‚îÇ  - AuditPaymentSubscriber             ‚îÇ
‚îÇ  - UpdateStatisticsSubscriber         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ CSV –∏–º–ø–æ—Ä—Ç

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CSV —Ñ–∞–π–ª               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ImportBatchPaymentFromCsvCommand   ‚îÇ
‚îÇ  - –ß—Ç–µ–Ω–∏–µ CSV (League\Csv)          ‚îÇ
‚îÇ  - –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏:               ‚îÇ
‚îÇ  1. –°–æ–∑–¥–∞—Ç—å IncomingPaymentDto    ‚îÇ
‚îÇ  2. –í—ã–∑–≤–∞—Ç—å PaymentIngestionService‚îÇ
‚îÇ  3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–º–ø–æ—Ä—Ç–∞                 ‚îÇ
‚îÇ  - –£—Å–ø–µ—à–Ω–æ: N –ø–ª–∞—Ç–µ–∂–µ–π             ‚îÇ
‚îÇ  - –û—à–∏–±–æ–∫: M –ø–ª–∞—Ç–µ–∂–µ–π              ‚îÇ
‚îÇ  - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏

### ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π

–ö–∞–∂–¥—ã–π –ø–ª–∞—Ç–µ–∂ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `refId`. –¢–∞–±–ª–∏—Ü–∞ –∏–º–µ–µ—Ç UNIQUE constraint –Ω–∞ —ç—Ç–æ—Ç —Å—Ç–æ–ª–±–µ—Ü.

```php
try {
    $payment = $this->paymentRepository->findByRefId($refId);
    if ($payment) {
        throw new DuplicatePaymentException("Payment already exists");
    }
} catch (DuplicatePaymentException $e) {
    // –í–µ—Ä–Ω—É—Ç—å 409 Conflict
}
```

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```php
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç—ã
if (!$this->isValidDate($paymentDate)) {
    throw new InvalidDateException();
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º–∞ > 0
if ($amount <= 0) {
    throw new NegativeAmountException();
}
```

### ‚úÖ –û—Ç—á–µ—Ç—ã

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º –∑–∞ –¥–∞—Ç—É.

```bash
php bin/console payment:report:by-date --date=2024-02-16
```

### ‚úÖ –û—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (Messenger)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç Symfony Messenger –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:
- –û—Ç–ø—Ä–∞–≤–∫–∞ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

---

## üîß –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (`require`)

| –ü–∞–∫–µ—Ç | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|--------|-----------|
| `symfony/framework-bundle` | 6.4.* | –û—Å–Ω–æ–≤–Ω–æ–π Symfony —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| `symfony/console` | 6.4.* | –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã |
| `symfony/messenger` | 6.4.* | –û—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π |
| `doctrine/orm` | ^3.6 | ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î |
| `doctrine/doctrine-bundle` | ^2.18 | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Doctrine |
| `league/csv` | ^9.28 | –ü–∞—Ä—Å–∏–Ω–≥ CSV —Ñ–∞–π–ª–æ–≤ |
| `ramsey/uuid` | ^4.9 | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è UUID |
| `illuminate/support` | ^10.49 | Laravel Collection utility |

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`require-dev`)

| –ü–∞–∫–µ—Ç | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|--------|-----------|
| `phpunit/phpunit` | ^10.5 | –Æ–Ω–∏—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `symfony/maker-bundle` | ^1.66 | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ |

---

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤ (–æ—Å–Ω–æ–≤–Ω—ã–µ)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PaymentController  ‚îÇ
‚îÇ  (REST Endpoint)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ uses
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PaymentIngestionService    ‚îÇ
‚îÇ (Use Cases)                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ uses
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PaymentRepository    ‚îÇ
‚îÇ (Data Access)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Payment (Doctrine    ‚îÇ
‚îÇ ORM Entity)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

1. **Unit Tests** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   ```bash
   ./phpunit tests/Domain/Service/
   ```

2. **Integration Tests** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   ```bash
   ./phpunit tests/Application/
   ```

3. **API Tests** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ REST —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
   ```bash
   ./test_api.sh
   ```

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤

```php
// –¢–µ—Å—Ç: —É—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
public function testSuccessfulPaymentUpload(): void
{
    $dto = new IncomingPaymentDto(...);
    $result = $this->service->process($dto);
    $this->assertTrue($result->isSuccessful());
}

// –¢–µ—Å—Ç: –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–∞
public function testDuplicatePaymentRejected(): void
{
    $this->expectException(DuplicatePaymentException::class);
    $this->service->process($dto);
    $this->service->process($dto); // –¥–æ–ª–∂–Ω–∞ –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
}
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã

1. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
   - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è

2. ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π**
   - UNIQUE constraint –Ω–∞ –ë–î
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

3. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
   - HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

4. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π**
   - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
   - –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (JWT, OAuth)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (RBAC, ACL)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS –≤ production
- [ ] –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –ü—Ä–æ–≤–æ–¥–∏—Ç—å security audit
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å rate limiting –Ω–∞ API
- [ ] –®–∏—Ñ—Ä–æ–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ò–Ω–¥–µ–∫—Å—ã –ë–î** –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** Symfony cache
3. **Async –æ–±—Ä–∞–±–æ—Ç–∫–∞** Messenger –¥–ª—è heavy –æ–ø–µ—Ä–∞—Ü–∏–π
4. **Connection pooling** PostgreSQL
5. **ORM optimization** Doctrine lazy loading

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ Symfony
php bin/console debug:router
php bin/console debug:container
php bin/console config:dump

# SQL –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
php bin/console doctrine:query:sql "SELECT * FROM payment LIMIT 10"
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Production checklist

- [ ] `APP_ENV=prod`
- [ ] `APP_DEBUG=0`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å production secrets
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å logging
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å rate limiting
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cache
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å queue workers
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS
- [ ] –°–µ—Ç–∞–ø database replication/backup
- [ ] –°–µ—Ç–∞–ø monitoring & alerting

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

- `README.md` - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `DOCKER_SETUP.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker
- `QUICKSTART.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `COMPOSER_GUIDE.md` - –†–∞–±–æ—Ç–∞ —Å Composer
- `PROJECT_ANALYSIS.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª (–∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞)

---

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω! üéâ**

